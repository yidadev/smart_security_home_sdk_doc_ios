# 智能场景

智能场景分为「一键执行场景」和「自动化场景」，下文分别简称为「场景」和「自动化」。

场景是用户添加动作，手动触发；自动化是由用户设定条件，当条件触发后自动执行设定的动作。

涂鸦云支持用户根据实际生活场景，通过设置气象或设备条件，当条件满足时，让一个或多个设备执行相应的任务。



| 类名                               | 说明                                                         |
| ---------------------------------- | ------------------------------------------------------------ |
| TuyaSmartScene                     | 提供了单个场景的添加、编辑、删除、执行4种操作，需要使用场景id进行初始化，场景id指的是 `TuyaSmartSceneModel` 的 `sceneId` 字段，可以从场景列表中获取。 |
| TuyaSmartSceneManager              | 主要提供了场景里条件、任务、设备、城市相关的所有数据，和场景列表数据获取。 |
| TuyaSmartScenePreConditionFactory  | 提供快捷创建自动化生效条件方法的工具类                       |
| TuyaSmartSceneConditionFactory     | 提供快捷创建场景条件方法的工具类                             |
| TuyaSmartSceneActionFactory        | 提供快捷创建场景动作方法的工具类                             |
| TuyaSmartSceneConditionExprBuilder | 提供快捷创建场景条件表达式方法的工具类                       |



在使用智能场景相关的接口之前，需要首先了解场景条件和场景任务这两个概念。

## 场景条件

场景条件对应 `TuyaSmartSceneConditionModel` 类，涂鸦云支持以下条件类型：

- 气象条件：包括温度、湿度、天气、PM2.5、空气质量、日落日出，用户选择气象条件时，可以选择当前城市。
- 设备条件：指用户可预先选择一个设备的功能状态，当该设备达到该状态时，会触发当前场景里的任务，但同一设备不能同时作为条件和任务，避免操作冲突。
- 定时条件：指可以按照指定的时间去执行预定的任务。

## 场景任务

场景任务是指当该场景满足已经设定的气象或设备条件时，让一个或多个设备执行某种操作，对应 `TuyaSmartSceneActionModel` 类。或者关闭、开启一个自动化。

**新增场景时，场景条件和场景任务对象的创建，参考本文档末尾的示例。**